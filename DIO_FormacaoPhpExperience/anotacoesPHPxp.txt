

imagem com php e apache
FROM debian

RUN  apt-get update && apt-get install php -y \
	apache2 \
	libapache2-mod-php \
	php && apt-get clean

EXPOSE 80

CMD ["apache2ctl", "-D", "FOREGROUND"]


Tratamento de excecões
	InvalidArgumentException
		quando tem uma entrada de tipo não esperado
		
	throw
		lançar
	try
		tentar
	catch
		captura
	finally
		exibir informação por exemplo
		
ctrl g no vscode permite indicar a linha para debugar

Debug
	warning e notice, não interrompem a execução do sistema
	Parse error - erros de sintaxe
	Fatal error - tentativas de uso de funções e classes não definidas
	
	para exibir no pho.ini
		display_errors: ON
		error_reporting: E_ALL
		
	Reprodução > Diagnóstico > Correção > Reflexão
	
	tracing : echo, var_dump()
	
	XDebug 

Hierarquia
	Throwable
       /\       /\
   Error	Exception
   		/\     /\
   	1RuntimeEx	2LogicEx > SPL = Standard PHP Library
   
   1 UnexpectedValueException
   	quando um valor não corresponde a um conjunto de valores
   1 UnderFlowException
   	tentativa de acessar um valor de um recipiente que está vazio
   1 RandeException
   	erros de aritmética
   1 OverFlowException
   	tentativa de inserir elementos em um recipiente cheio
   1 OutOfBoundsException
   	chave inválida
   2 OutOfRangeException
   	indices inválidos
   2 LengthException
   	tamanhos inválidos
   2 InvalidArgumentException
   	argumento não é do tipo esperado
   2 DomainException
   	dados que não correspondem ao domínio
   2 BadFunctionCallException
   	problemas na chamada da função como parametros ausentes ou não definida
   	2 BadMethodCallException
   		argumentos ou metodos não definidos
   		
   		
GitHub

Todo código-fonte desenvolvido durante o curso foi versionado no GitHub, nos seguintes endereços:

https://github.com/roseneidesantos 

https://github.com/roseneidesantos/dio-aulas-excecoes.git 

https://github.com/roseneidesantos/dio-aulas-tratamento-de-excecoes.git

Bons estudos 

Composer
	reutilização de implementações
	Instalação 
		https://getcomposer.org/download/
			php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
			php composer-setup.php
			php -r "unlink('composer-setup.php');"
			sudo mv composer.phar /usr/local/bin/composer
	composer init
		vai criar arquivo de configuração
			composer.json
	Gerenciamento de dependencias
		packagist.org
			mpdf/mpdf 
			
		contexto dev
			no json "require-dev": {}
				dependencias necessárias na etapa de desenvolvimento, por exemplo os testes unitarios
		$ composer require mpdf/mpdf
		
		pode ser inseridas as dependencias no json e depois rodar o $ composer install
		
	composer.lock
		armazena a versão das dependencias usadas no projeto
	composer update
		muda o composer.lock
	composer remove
		remove dependencias
	vendor/autoload.php
	
	Dockerfile
		FROM debian

		RUN apt-get update && apt-get upgrade -y && apt-get install php -y && apt-get install p7zip-full -y && apt-get install git -y && apt-get clean

		EXPOSE 80
	
	index.php
		<?php

		require __DIR__ . "/vendor/autoload.php";
	
		$mpdf = new \Mpdf\Mpdf();
		$mpdf->WriteHTML('<h1>Hello world!</h1>');
		$mpdf->Output();
	
	
	http://github.com/lafraga93/composer-dio
	
Orientação a objetos:
	Abstracao:
		para entender quais os componentes que compoem a solução na vida real
		
	Classes e objetos
		Classes são sempre iniciadas com letra maiuscula
		
	Namespaces
		configuração do autoload
		é como o nome de um diretório ou pacote
		
	Atributos e metodos
		<?php //ContaBancaria.php

		declare(strict_types=1); //quando o arquivo for interpretado pelo php, vai ser considerado o tipo

		namespace App;

		class ContaBancaria
		{
			//atributos
			public string $banco = "Bradesco";
			public string $nomeTitular = "Paulo Plinio";
			public string $numeroAgencia = "8244";
			public string $numeroConta = "57354-10";
			public float $saldo = 0;
	
			//metodos
			public function exibirDadosDaConta(): array
			{
				return [
					'banco' => $this->banco,
					'nomeTitular' => $this->nomeTitular,
					'numeroAgencia' => $this->numeroAgencia,
					'numeroConta' => $this->numeroConta,
					'saldo' => $this->saldo,
				];
			}
		}
		
		<?php //objetoContaBancaria.php

		require __DIR__ . '/../vendor/autoload.php';

		use App\ContaBancaria;

		$conta = new ContaBancaria();

		var_dump($conta->exibirDadosDaConta());

		
		Exibindo apenas $conta no var_dump
		root@2ae77ef17d61:/home/composer# php debug/objetoContaBancaria.php 
		object(App\ContaBancaria)#4 (5) {
		  ["banco"]=>
		  string(8) "Bradesco"
		  ["nomeTitular"]=>
		  string(12) "Paulo Plinio"
		  ["numeroAgencia"]=>
		  string(4) "8244"
		  ["numeroConta"]=>
		  string(8) "57354-10"
		  ["saldo"]=>
		  float(0)
		}
		root@2ae77ef17d61:/home/composer# vim ./debug/objetoContaBancaria.php
		Exibindo o array
		root@2ae77ef17d61:/home/composer# php debug/objetoContaBancaria.php 
		array(5) {
		  ["banco"]=>
		  string(8) "Bradesco"
		  ["nomeTitular"]=>
		  string(12) "Paulo Plinio"
		  ["numeroAgencia"]=>
		  string(4) "8244"
		  ["numeroConta"]=>
		  string(8) "57354-10"
		  ["saldo"]=>
		  float(0)
		}
		
	Encapsulamento
		restringir o acesso a implementação da classe
		Visibilidade
			publica - normalmente usado para métodos
				public function exibirDadosDaConta(): array 
				{
				}
			protegida - usado em classes herdeiras
				protected float $saldo = 0;
			privada - normalmente para atributos
				private string $nomeTitular = "Paulo Plinio";
					acessivel apenas pelo metodo dentro da classe
					
	Getter e Setters
		assim como não se pode obter diretamente atributos privados também não é possível defini-los
		setter permitem alterar o valor de um atributo
		getter permitem acessar o valor de um atributo
		
	Metodo contrutor
		faz o set de todos os atibutos de uma só vez
		public function __construct(atributos){como no set}
		
	Herança
		Objetos tem a possibilidade de herdar comportamento e atributo de outros
		pode existir uma classe abstrata base e outras que são herdeiras
	
	Polimorfismo
		um mesmo objeto que herda algo de uma classe base pode ter um comportamento diferente
		Contratos
			interface OperacoesConta {}
				
				na classe base
					abstract class ContaBancariaBase implements OperacoesConta {}
					
				no objeto
					function executarOperacao(OperacoesConta, $conta): void	

	https://github.com/lafraga93/php-oo-dio

Orientação a objetos e baco de dados
	paradigmas: procedural/estruturada, funcional, orientada a objetos
	
	Classes
		representação do objeto
		
		<?php
		
		class NomeDaClasse
		{
		
		}
		
	Objeto
		uma instância da classe
		
		<?php
		
		$nomeDoObjeto = new NomeDaClasse();
	
	Propriedades / atributos
		Tudo que a classe possui
		
		<?php
		
		class NomeDaClasse
		{
			$atributo1;
			$segundoAtributo;
		}
	Visibilidade
		Modificadores de acesso: define a visibilidade dos elementos da classe (public, private, protected)
	
		<?php
		
		class NomeDaClasse
		{
			public $atributo1;
			private $segundoAtributo;
		}
	Acesso
		<?php
		
		var_dump($nomeDoObjeto->segundoAtributo);
	Metodos / ações / funções
		<?php
		
		class NomeDaClasse
		{
			public function executarMetodo()
			{
				return "Metodo executado";
			} 
		}
		
		var_dump($nomeDoObjeto->executarMetodo());
		
		Metodo construtor
			sempre executado quando instancia a classe, ele vai receber os atributos passados quando instanciada a classe
			
			public function __construct($atributoPassado)
			{
				$this->atributo1 = $atributoPassado;
			}
			
		$nomeDoObjeto = new NomeDaClasse('Atributo Passado');
	
	Tipagem
		<?php
		
		declare(strict_types=1);
		
		class NomeDaClasse
		{
			/**
			* @var string
			**/
			public $atributo1;
			
			private string $segundoAtributo; //a partir do php 7.4
		
			public function __construct(string $atributoPassado): string
			{
				$this->atributo1 = $atributoPassado;
			}
		
		}
		
	Datas
		<?php
		
		date('d/m/Y'); //forma primitiva
		
		$data = new DateTime(); //data com a classe
		var_dump($data);
		
		$data->format('d-m-Y'); //data formatada
		$data->format('d-m-Y H:i:s'); //com horas
		
		$intervalo = new DateInterval('PT5M'); // definição do periodo P periodo, T tempo, 5M minutos. P5Y 5 anos
		$data->add($intervalo); //adiciona o intervalo a data atual ->sub retira
		
	Exceções
		<?php
		
		throw new Exception("Exceção");
		
		echo "não vai ser executado";
		
		
		<?php
		
		try{ 
			//vai testar se gera uma exceção
		} catch (Exception $e) {
			echo $e->getMessage; //metodo da classe Exception
			die();
		} finally {
		
	Banco de dados
		mysqli X PDO 
		
		
Introdução a APIs e REST com PHP
	Composer
		Gerenciador de biblitecas do projeto
	Xampp
		pacote com servidores de código aberto - mysql php apache pearl
	Postman
		testes de api - requisições http
		
	API
		
		
	HTTP - camada de aplicação - protocolo sem estado
		Arquitetura REST - representational state transfer
		
		Verbos HTTP - indicar uma ação desejada - metodos de requisição utilizados para acessar endpoinsts de APIs REST
		    POST - enviar um conteúdo que será manipulado por algo que já existe no servidor (ex: dados de um fomulario)
		    GET - recuperar recursos, padrão para requisição pela url
		    PUT/PATCH - envia assim como o POST mas pode fazer uma atualização por exemplo, sobrescrevendo a informação, no POST é criado um novo registro a cada interação
		    DELETE - remove um recurso
	
		Status Code - na linha inicial da requisição
		    1xx - informação
		    	reuquisição recebido e em processamento
		    2xx - sucesso
		    	requisição recebida, entendida e aceita pelo servidor
		    3xx - redirecionamento
		    	outra ação será tomada
		    4xx - Erro no cliente
		    	requisição incorreta ou incompleta
		    5xx - Erro Servidor
		    	servidor falhou ao receber a requisição aparentemente válida
		
		
	Preparação para o desenvolvimento
		Padrão MVC
			Arquitetura de software em camadas
				Model - gerenciar os dados e logica de negocio
					ligado a tabelas do banco
				View - layout e exibição
					como os dados vão ser exibidos
				Controller - gerencia os eventos das interfaces, utilizando os metodos da camada Model
					O controller vai intermediar a View e a Model
					Atualizar o modelo ou a resposta da entrada no usuário
	Estrutura do projeto
		github.com/laiquesantana/DIO-API-REST
		.
		├── Config
		│   └── config.php
		├── Controller
		│   └── API
		│       ├── BaseController.php
		│       └── UserController.php
		├── database.json
		├── index.php
		└── Model
		    ├── Database.php
		    └── UserModdel.php
	
	Laravel
		Framework PHP MVC
		Taylor B Otwel
		laracast.com - cursos
		
		composer.json >
		.env > variaveis de ambiente
		
	Materiais de Apoio
		https://github.com/laiquesantana/DIO-PHP


Desenvolvimento Avançado em PHP
	Composer
		Reaproveitamento de código
		.phar - é o equivalente a um executavel como o jar do Java
		
		getcomposer.org/download/
		
		ele pode ficar apenas no diretorio do projeto, o ideal em ambiente de desnvolvimento é colocar em um ambiente acessivel que qualquer lugar /usr/local/bin/composer
		
		packagist.org/ repositorio publico de pacotes json
		
	Testes unitários
		TDD - desenvolvimento guiado aos testes
			o PHPUnit não significa que o densenvolvimento é orientado a testes
			para ser TDD o teste tem que vir primeiro
			
		https://phpunit.de/
			➜ composer require --dev phpunit/phpunit ^10

			➜ ./vendor/bin/phpunit --version
		
		
		A classe de teste precisa ser basicamente um espelho e com a palavra Test ex: SearchTest.php
		
		precisa incluir o caso de teste na classe:
			use PHPUnit\Framework\TestCase;
		
		e a função precisa começar com teste, ex: public function testGetAddressFromZipcodeDefaultUsage()
		
		para executar o teste
			vendor/bin/phpunit tests/ --colors=always
			
		Gerar relatório de code ceverag
			vendor/bin/phpunit tests/ --colors=always --testdox-text report-tests.txt
			vendor/bin/phpunit tests/ --colors=always --testdox-text report-tests.txt --coverage-html=_report --coverage-filter=src/
		
PSRs
	https://www.php-fig.org


























	
